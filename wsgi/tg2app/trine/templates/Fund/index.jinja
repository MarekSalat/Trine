{% extends "master.jinja" %}
{% import 'Fund/macros.jinja' as m with context %}

{% block master_title %}
    Funds
{% endblock %}

{% block contents %}

    <div class="row">
        <div class="bs-callout bs-callout-info row col-xs-12">
            <h4>Produces two files</h4>

            <p>
                All checked plugins will be compiled into a readable
                <code>bootstrap.js</code>
                and a minified
                <code>bootstrap.min.js</code>
                . We recommend you use the minified version in production.
            </p>
        </div>

        <div class="row col-xs-12">
            <div class="col-md-6 col-sm-12">
                {{ m.render_fund_form(tg.url('/fund/add_fund'), tags=tags) }}
            </div>

            <div class="row col-md-6 col-sm-12">
                <div class="row">
                    <div class="col-xs-6">
                        <pre class="">
                            {%- for tag in tags -%}
                                {{ '%7s'|format(tag.type) }} {{ tag.name }}{{ '\n'|safe }}
                            {%- endfor -%}
                        </pre>
                    </div>

                    <div class="col-xs-6">
                        <pre class="">
                            {%- for group in tagGroups -%}
                                {%- for tag in group.tags -%}
                                    {%- if loop.first %}{{ '%7s'|format(tag.type) }}: {% endif -%}
                                    {{ tag.name }}{{ '; ' if not loop.last }}
                                {%- endfor -%}{{ '\n'|safe }}
                            {%- endfor -%}
                        </pre>
                    </div>
                </div>
                <div class="row col-xs-12">
                    <h2>Balance {{ totalBalance }}</h2>
                    {% for name,balance in balances.items() %}
                        <p>{{ name }} <strong>{{ balance }}</strong></p>
                    {% endfor %}

                    <h3>Total incomes {{ totalIncomes }}</h3>
                    <h3>Total expenses {{ totalExpenses }}</h3>

                </div>
            </div>
        </div>
    </div>

    <div class="row ">
        {%- for fund in funds -%}
            {{ m.render_fund(fund) }}
            {% if loop.index is divisibleby 6 %}
                <div class="clearfix visible-md visible-lg"></div>
            {% endif %}
            {% if loop.index is divisibleby 3 %}
                <div class="clearfix visible-xs"></div>
            {% endif %}
        {%- endfor -%}
    </div>
{% endblock %}
